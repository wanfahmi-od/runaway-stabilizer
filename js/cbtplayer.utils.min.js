/*
 * CBT Player - ds.utils v1.7.5.22153(Local)
 * 2019 Copyright - Pelesys Learning Systems Inc. - All Rights Reserved 
 */
if(!String.prototype.endsWith){String.prototype.endsWith=function(a){return this.indexOf(a,this.length-a.length)!==-1}}var ds={};ds.utils={};ds.utils.ExtendMethod=function(a,b){if(!a){return b}return function(){var c;if(a){c=a.apply(this,arguments)}[].push.call(arguments,c);return b&&b.apply(this,arguments)}};ds.utils.Merge=function(){var a=Array.prototype.slice.call(arguments);var b=[{}].concat(a,[function(f,h,d,e,g,i){if(_.isArray(h)){return h}}]);var c=_.mergeWith.apply(this,b);return c};ds.utils.ParseJSON=function(b){try{var d=ds.utils.RemoveCarriageReturn(b);var c=JSON.parse(d);if(c&&typeof c==="object"){return c}}catch(a){}return false};ds.utils.ParseBoolean=function(a){if(typeof a==="boolean"){return a}if(typeof a==="string"){a=ds.utils.RemoveCarriageReturn(a).toLowerCase();switch(a){case"1":case"true":return true;case"0":case"false":return false}}return null};ko.gxutils={};ko.gxutils.SetObservableArray=function(h,e,g,d){var b=null,a=null,c=[];h([]);if(e&&e.length>0){for(var f=0;f<e.length;f++){b=e[f];if(g){a=new g();if(a.SetModel){a.SetModel(b,d)}}else{a=b}c.push(a)}ko.utils.arrayPushAll(h(),c);h.valueHasMutated()}};ko.extenders.maxlength=function(b,a){var c=ko.dependentObservable({read:b,write:function(d){if(d.length<=a){b(d)}else{c.notifySubscribers(b())}}});b.view=c;b.maxlength=a;return b};ko.gxutils.SetObservableArrayAdvanced=function(g,d,h){var j={modelClass:null,custom:null,modelTest:null};$.extend(true,j,h);var b=null,a=null,c=[];g([]);var f;if(d&&d.length>0){for(var e=0;e<d.length;e++){b=d[e];if(j.modelTest){f=j.modelTest(b)}else{f=j.modelClass}if(f){a=new f();if(a.SetModel){a.SetModel(b,j.custom)}}else{a=b}c.push(a)}ko.utils.arrayPushAll(g(),c);g.valueHasMutated()}};ko.bindingHandlers.stopBinding={init:function(){return{controlsDescendantBindings:true}}};ko.virtualElements.allowedBindings.stopBinding=true;ds.utils.IsScrolledIntoView=function(b,a){var d=b.getBoundingClientRect().top-a.getBoundingClientRect().top;var c=b.getBoundingClientRect().bottom-a.getBoundingClientRect().bottom;var e=(d>=0)&&(c<=0);return e};ds.utils.ExtractDomain=function(b){var a;if(b.indexOf("://")>-1){a=b.split("/")[2]}else{a=b.split("/")[0]}a=a.split(":")[0];return a};ds.utils.GetQueryParams=function(d){var c=d||document.location.search;if(!c){return null}var a=c.split("?");var b;if(a.length===1){b=a[0]}if(a[1]){b=a[1]}if(b){return b.split("&").map(function(e){return e=e.split("="),this[e[0].toLowerCase()]=e[1],this}.bind({}))[0]}return null};ds.utils.GetQueryString=function(b,e){var a=e||window.location.href;var c=new RegExp("[?&]"+b+"=([^&#]*)","i");var d=c.exec(a);return d?unescape(d[1]):null};ds.utils.stringHelper={};ds.utils.stringHelper.NEWLINE=String.fromCharCode(13)+String.fromCharCode(10);ds.utils.stringHelper.Replace=function(e,c,d){e=String(e);c=String(c);d=String(d);if(e){return e.split(c).join(d)}else{return""}};ds.utils.Trim=function(a){if(a){a=a.replace(/(^\s*)|(\s*$)/gi,"");a=a.replace(/\n[ ]*/,"\n");return a}else{return a}};ds.utils.RemoveCarriageReturn=function(a){if(a){a=a.replace(/(^\s*)|(\s*$)/gi,"");a=a.replace(/\n[ ]*/,"\n");a=a.replace(/[\n\r]/g,"");a=a.replace(/\n/,"");return a}else{return a}};ds.utils.FormatString=function(b){if(!b){throw new Error("Missing string parameter.")}var a=Array.prototype.slice.call(arguments,1);return b.replace(/{(\d+)}/g,function(c,d){return typeof a[d]!=="undefined"?a[d]:c})};ds.utils.GetTimeInterval=function(a){function b(e){var f=Math.floor(e/3600000)%24;if(f<10){return"0"+f.toString()}else{return f}}function c(e){var f=Math.floor(e/60000)%60;if(f<10){return"0"+f.toString()}else{return f}}function d(e){var f=Math.floor(e/1000)%60;if(f<10){return"0"+f.toString()}else{return f}}if(a===null||a===undefined){a=0}return b(a)+":"+c(a)+":"+d(a)};ds.utils.LoadObjectFromScriptFile=function(e,d){var b=new $.Deferred();var c=document.createElement("script");c.setAttribute("src",e);c.onerror=function(){if(c.onerror){b.reject()}};document.head.appendChild(c);function a(){if(window[d]){b.resolve()}else{setTimeout(function(){a()},100)}}a();return b.promise()};ds.utils.RemoveObjectFunctions=function(b){var a;for(var c in b){if(b.hasOwnProperty(c)){switch(typeof(b[c])){case"function":delete b[c];break;case"object":ds.utils.RemoveObjectFunctions(b[c]);break}}}};ds.utils.IsTouchScreen=function(){if("maxTouchPoints" in navigator){return navigator.maxTouchPoints>0}if("msMaxTouchPoints" in navigator){return navigator.msMaxTouchPoints>0}var a=window.matchMedia&&matchMedia("(pointer:coarse)");if(a&&a.media==="(pointer:coarse)"){return !!a.matches}if("orientation" in window){return true}var b=navigator.userAgent;return(/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(b)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(b))};