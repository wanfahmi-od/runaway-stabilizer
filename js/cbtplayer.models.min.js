/*
 * CBT Player - Models v1.7.5.22153(Local)
 * 2019 Copyright - Pelesys Learning Systems Inc. - All Rights Reserved 
 */
var PlayerConstants=PlayerConstants||{};PlayerConstants={SectionCompletionTypes:{AUDIO:"audio",VISION:"vision",BOTH:"both"},PageCompletionTypes:{LAST_SECTION:"lastsection",NONE:"none",DIFFERENT_SECTION:"secti",ALL_SECTION:"all",TIMER_NUMBER:"timer"},SectionAdvanceTypes:{AUTO:"auto",WAIT:"wait",JUMP:"jump"},ErrorCodes:{GET_PARAM_AICC:"1000",GET_PARAM_SCORM:"2000",GET_LOCAL:"3000",SET_MAP:"3100",PUT_PARAM_AICC:"1010",PUT_PARAM_SCORM:"2010",PUT_COMMENT_AICC:"1020",PUT_COMMENT_SCORM:"2020",EXIT_AU_AICC:"1030 (Exit AICC)",EXIT_AU_SCORM:"2030",LOAD_AUDIO:"4000 (Load Audio)",LOAD_CBT_XML:"5000 (Load CBT XML)",LOAD_CBT_JSON:"5010 (Load CBT JSON)",LOAD_CBT_JAVASCRIPT:"5020 (Load CBT Javascript)",LOAD_CBT_GLOBALVARIABLE:"5021 (Load CBT Javascript GlobalVariable)",LOAD_CBT_SCO2004:"5030 (Load CBT SCO2004)",LOAD_PAGE_XML:"5500 (Load page XML)"},LMSAPITypes:{AICC:"aicc",SCORM_12:"scorm12",SCORM_2004:"scorm2004",LOCAL:"local"},LessonStatusTypes:{INCOMPLETE:"incomplete",COMPLETED:"completed",PASSED:"passed",FAILED:"failed"},COMMENT_MAX_NUMBER:255};function ModelBase(a){var c=this;var b={_className:"ModelBase"};$.extend(true,b,a);this._className=b._className;this.SetModel=null;this.MergeModel=function(d){var e=ko.toJS(c);e=ds.utils.Merge(e,d);c.SetModel&&c.SetModel(e)};this.toJSON=function(){var e=ko.toJS(this);var f=null;for(f in c){if(c.hasOwnProperty(f)){if(f.indexOf("_")===0||c[f]===""){delete e[f]}else{if(typeof c[f]==="function"){if(f==="canValidate"||ko.isComputed(c[f])||ko.isPureComputed(c[f])){delete e[f]}else{if(ko.isObservable(c[f])){var d=c[f]();if(d instanceof Array&&d.length===0){delete e[f]}}}}}}}return e}};function CommentModel(a){var b=this;ModelBase.call(this,{_className:"CommentModel"});this.studentId=ko.observable();this.comment=ko.observable();this.locationId=ko.observable();this.timestamp=ko.observable();this.SetModel=ds.utils.ExtendMethod(this.SetModel,function(c){c=c||{};this.studentId(c.studentId);this.comment(c.comment);this.locationId(c.locationId);this.timestamp(c.timestamp)});if(a){this.SetModel(a)}};function CBTItemModel(b,a){var d=this;var c={_className:"CBTItemModel"};$.extend(true,c,b);ModelBase.call(this,c);this.id;this.title;this.type;this.location;this.graphicsLocation;this.completion;this.data;this.isVisible=ko.observable();this.sections=[];this.actions=[];this.fullItems=ko.observableArray();this.items=ko.observableArray();this.parentId;this.folderPath;this.visited=ko.observable(false);this.completed=ko.observable(false).extend({notify:"always"});this.selected=ko.observable(false);this.playbackFinished=ko.observable(false);this.learningTime=ko.observable();this._played=ko.pureComputed(function(){var e=ko.utils.arrayFirst(this.sections,function(f){return f._played()});if(e){return true}else{return false}},this);this.sectionsDict=ko.pureComputed(function(){var e={};ko.utils.arrayForEach(this.sections,function(f){e[f.id]=f});return e},this);this.toJSON=function(){var f=ko.toJS(this);var g=null;for(g in d){if(d.hasOwnProperty(g)){if(g.indexOf("_")===0||d[g]===""){delete f[g]}else{if(d[g] instanceof Array&&d[g].length===0){delete f[g]}if(typeof d[g]==="function"){if(g==="parentId"||g==="visited"||g==="completed"||g==="selected"||g==="playbackFinished"||g==="learningTime"||g==="items"||ko.isComputed(d[g])||ko.isPureComputed(d[g])){delete f[g]}else{if(ko.isObservable(d[g])){var e=d[g]();if(e instanceof Array&&e.length===0){delete f[g]}}}}}}}return f};this.SetModel=ds.utils.ExtendMethod(this.SetModel,function(f,e){f=f||{};e=e||{};this.id=f.id;this.title=f.title;this.type=f.type;this.location=f.location;this.graphicsLocation=f.graphicsLocation;this.completion=f.completion;this.data=f.data;if(f.data&&f.data.audio){this.data={audio:[]};var g=0;while(f.data.audio[g]){this.data.audio.push(f.data.audio[g]);g++}}this.isVisible(f.isVisible);this.sections=[];if(f.sections){ko.utils.arrayForEach(f.sections,function(h){d.sections.push(new CBTPageSectionModel(h))})}ko.gxutils.SetObservableArray(this.fullItems,f.fullItems,CBTItemModel);ko.gxutils.SetObservableArray(this.items,f.items,CBTItemModel);this.parentId=f.parentId;this.folderPath=f.folderPath;this.visited(f.visited);this.completed(f.completed);this.playbackFinished(f.playbackFinished);this.learningTime(f.learningTime)});this.toJSON=function(){var f=ko.toJS(this);var g=null;for(g in d){if(d.hasOwnProperty(g)){if(g.indexOf("_")===0||d[g]===""){delete f[g]}else{if(d[g] instanceof Array&&d[g].length===0){delete f[g]}if(typeof d[g]==="function"){if(g==="parentId"||g==="visited"||g==="completed"||g==="selected"||g==="playbackFinished"||g==="learningTime"||g==="items"||ko.isComputed(d[g])||ko.isPureComputed(d[g])){delete f[g]}else{if(ko.isObservable(d[g])){var e=d[g]();if(e instanceof Array&&e.length===0){delete f[g]}}}}}}}return f};if(b){this.SetModel(b,a)}};function CBTOrganizationModel(a){var b=this;ModelBase.call(this,{_className:"CBTOrganizationModel"});this.id;this.language=ko.observable();this.description;this.rights;this.title;this.contentPath=ko.observable();this.date=ko.observable();this.expiryDate=ko.observable();this.fullItems=ko.observableArray();this.items=ko.observableArray();this.itemsFilter=ko.observable().extend({rateLimit:{timeout:200,method:"notifyWhenChangesStop"}});this.itemsDict=ko.pureComputed(function(){var c={};var e=this.items();function d(f){ko.utils.arrayForEach(f,function(g){c[g.id]=g;if(g.items().length){d(g.items())}})}d(this.items());return c},this);this.fullItemsDict=ko.pureComputed(function(){var c={};var e=this.fullItems();function d(f){ko.utils.arrayForEach(f,function(g){c[g.id]=g;if(g.items().length){d(g.items())}})}d(this.fullItems());return c},this);this.itemsList=ko.pureComputed(function(){var c=this.itemsDict();var e=this.items();var d=$.map(c,function(g,f){return g});return d},this);this.filteredItemsList=ko.pureComputed(function(){var c=this.itemsList();if(this.itemsFilter()){var d=this.itemsFilter().split(" ");$.each(d,function(f,e){c=c.filter(function(h){var g=_.trimStart(e).toLowerCase();if(h.id.toLowerCase().indexOf(g)>=0||h.title.toLowerCase().indexOf(g)>=0){return true}else{return false}})})}return c},this);this.pagesList=ko.pureComputed(function(){var c=this.itemsList();var e=this.items();var d=c.filter(function(f){return f.type!=="topic"});return d},this);this.topicsList=ko.pureComputed(function(){var c=this.itemsList();var d=this.items();var e=c.filter(function(f){return f.type==="topic"});return e},this);this._completion=null;this.completionStatus=ko.pureComputed(function(){var c=this.items();ko.utils.arrayForEach(c,function(e){var f=e.completed()});var d="incomplete";if(c.length&&this._completion){d=this._completion.CalcCompletion()}return d},this);this.lessonStatus=ko.observable();this.lessonScore=ko.observable();this.learningTime=ko.pureComputed(function(){var c=0;ko.utils.arrayForEach(this.pagesList(),function(e){var d=e.learningTime()||0;c+=d});return c},this);this.toJSON=function(){var d=ko.toJS(this);var e=null;for(e in b){if(b.hasOwnProperty(e)){if(e.indexOf("_")===0||b[e]===""){delete d[e]}else{if(typeof b[e]==="function"){if(e==="items"||ko.isComputed(b[e])||ko.isPureComputed(b[e])){delete d[e]}else{if(ko.isObservable(b[e])){var c=b[e]();if(c instanceof Array&&c.length===0){delete d[e]}}}}}}}return d};this.SetModel=ds.utils.ExtendMethod(this.SetModel,function(c){c=c||{};this.id=c.id;this.language(c.language);this.description=c.description;this.rights=c.rights;this.title=c.title;this.date(c.date);this.expiryDate(c.expiryDate);this.contentPath(c.contentPath);ko.gxutils.SetObservableArrayAdvanced(this.fullItems,c.fullItems,{modelTest:function(d){if(d.type!=="topic"&&d.type!=="mergedpages"){return CBTItemModel}else{return CBTTopicModel}}});ko.gxutils.SetObservableArrayAdvanced(this.items,c.items,{modelTest:function(d){if(d.type!=="topic"&&d.type!=="mergedpages"){return CBTItemModel}else{return CBTTopicModel}}})});this.toJSON=function(){var d=ko.toJS(this);var e=null;for(e in b){if(b.hasOwnProperty(e)){if(e.indexOf("_")===0||b[e]===""){delete d[e]}else{if(typeof b[e]==="function"){if(e==="items"||ko.isComputed(b[e])||ko.isPureComputed(b[e])){delete d[e]}else{if(ko.isObservable(b[e])){var c=b[e]();if(c instanceof Array&&c.length===0){delete d[e]}}}}}}}return d};if(a){this.SetModel(a)}};function CBTPageSectionModel(b,a){var c=this;ModelBase.call(this,{_className:"CBTPageSectionModel"});this.id;this.audioLocation;this.audioText;this.instruction;this.completion;this.advance;this._avCompleted=ko.observable(false);this._audioCompleted=ko.observable(false);this._visualCompleted=ko.observable(false);this._played=ko.observable(false);this.SetModel=ds.utils.ExtendMethod(this.SetModel,function(e,d){e=e||{};this.id=e.id;this.audioLocation=e.audioLocation;this.audioText=e.audioText;this.instruction=e.instruction;this.completion=e.completion;this.advance=e.advance});if(b){this.SetModel(b,a)}};function CBTStructureModel(a){var b=this;ModelBase.call(this,{_className:"CBTStructureModel"});this.id=ko.observable();this.defaultOrganizationId=ko.observable();this.organizations=ko.observableArray();this.studentId=ko.observable();this.currentPageId=ko.observable();this.lessonStatus=ko.observable();this.rawScore=ko.observable();this.sessionStartTime=ko.observable();this.comments=ko.observableArray();this.organizationsDict=ko.pureComputed(function(){var c={};var d=this.organizations();ko.utils.arrayForEach(this.organizations(),function(e){c[e.id]=e});return c},this);this.SetModel=ds.utils.ExtendMethod(this.SetModel,function(c){c=c||{};this.id(c.id);this.defaultOrganizationId(c.defaultOrganizationId);ko.gxutils.SetObservableArray(this.organizations,c.organizations,CBTOrganizationModel)});if(a){this.SetModel(a)}};function CBTTopicModel(b,a){var c=this;CBTItemModel.call(this,{_className:"CBTTopicModel"});this.completed=ko.pureComputed({read:function(){var d=ko.utils.arrayFirst(this.items(),function(e){return !e.completed()});if(d){return false}else{return true}},write:function(d){}},this);this.isItemsVisible=ko.observable();this.visited=ko.pureComputed({read:function(){var d=ko.utils.arrayFirst(this.items(),function(e){return e.visited()});if(d){return true}else{return false}},write:function(d){}},this);this.completedItemsCount=ko.pureComputed({read:function(){var d=0;ko.utils.arrayForEach(this.items(),function(e){if(e.completed()){d++}});return d},write:function(d){}},this);this.incompleteItemsCount=ko.pureComputed({read:function(){var d=0;ko.utils.arrayForEach(this.items(),function(e){if(!e.completed()&&e.visited()){d++}});return d},write:function(d){}},this);this.progress=ko.pureComputed({read:function(){var d=this.completedItemsCount()/this.items().length*100;return Math.floor(d)},write:function(d){}},this);this.learningTime=ko.pureComputed({read:function(){var d=0;ko.utils.arrayForEach(this.items(),function(f){var e=f.learningTime()||0;d+=e});return d},write:function(d){}},this);this.descendantPages=ko.pureComputed(function(){var d=[];function e(f){if(f.type==="topic"||f.type==="mergedpages"){ko.utils.arrayForEach(f.items(),function(g){e(g)})}else{d.push(f)}}e(this);return d},this);this.SetModel=ds.utils.ExtendMethod(this.SetModel,function(e,d){});if(b){this.SetModel(b,a)}};function PlayerConfigModel(a){var b=this;ModelBase.call(this,{_className:"PlayerConfigModel"});this.developerMode=ko.observable();this.launchOptionsMode=ko.observable();this.dataSourcePath=ko.observable();this.startPageId=ko.observable();this.idleTimeOutMinutes=ko.observable();this.glossaryPath=ko.observable();this.referencesPath=ko.observable();this.fastAdvance=ko.observable();this.buttons={comments:ko.observable(),language:ko.observable(),glossary:ko.observable(),reference:ko.observable(),audio:ko.observable(),audioText:ko.observable(),sections:ko.observable(),progress:ko.observable()};this.uiLangCodes=ko.observableArray();this.defaultOrganizationId=ko.observable();this.organizations=ko.observable();this.dataSourceType=ko.observable();this.dataVariable=ko.observable();this.lmsType=ko.observable();this.completionType=ko.observable();this.hiddenItems=ko.observableArray();this.logoPath=ko.observable();this.pageLoadingTimeoutDuration=ko.observable();this.topicCompletionMessages=ko.observable();this.controlBarTopColor=ko.observable();this.controlBarBottomColor=ko.observable();this.titleBarColor=ko.observable();this.contentContainerBackgroundColor=ko.observable();this.controlBarBottomIconColor=ko.observable();this.controlBarBottomActiveIconColor=ko.observable();this.topicColor=ko.observable();this._playSpeed=ko.observable();this._autoPlay=ko.observable();this._autoPlaySkipTimeout=ko.observable();this._enableLocalStorage=ko.observable();this._canvasGraphicsQuality=ko.observable();this.ui=ko.observable();this._singleFrame=ko.observable();this.lmsContentProtection=ko.observable();this.SetModel=ds.utils.ExtendMethod(this.SetModel,function(c){c=c||{};c.buttons=c.buttons||{};this.developerMode(c.developerMode);this.launchOptionsMode(c.launchOptionsMode);this.dataSourcePath(c.dataSourcePath);this.startPageId(c.startPageId);this.idleTimeOutMinutes(c.idleTimeOutMinutes);this.glossaryPath(c.glossaryPath);this.referencesPath(c.referencesPath);this.fastAdvance(c.fastAdvance);this.buttons.comments(c.buttons.comments);this.buttons.language(c.buttons.language);this.buttons.glossary(c.buttons.glossary);this.buttons.reference(c.buttons.reference);this.buttons.audio(c.buttons.audio);this.buttons.audioText(c.buttons.audioText);this.buttons.sections(c.buttons.sections);this.buttons.progress(c.buttons.progress);this.uiLangCodes(c.uiLangCodes);this.defaultOrganizationId(c.defaultOrganizationId);this.organizations(c.organizations);this.dataSourceType(c.dataSourceType);this.dataVariable(c.dataVariable);this.lmsType(c.lmsType);this.completionType(c.completionType);ko.gxutils.SetObservableArray(this.hiddenItems,c.hiddenItems);this.logoPath(c.logoPath);this.pageLoadingTimeoutDuration(c.pageLoadingTimeoutDuration);this.topicCompletionMessages(c.topicCompletionMessages);this.lmsContentProtection(c.lmsContentProtection);this.controlBarTopColor(c.controlBarTopColor);this.controlBarBottomColor(c.controlBarBottomColor);this.titleBarColor(c.titleBarColor);this.contentContainerBackgroundColor(c.contentContainerBackgroundColor);this.controlBarBottomIconColor(c.controlBarBottomIconColor);this.controlBarBottomActiveIconColor(c.controlBarBottomActiveIconColor);this.topicColor(c.topicColor);this._playSpeed(c._playSpeed);this._autoPlay(c._autoPlay);this._autoPlaySkipTimeout(c._autoPlaySkipTimeout);this._enableLocalStorage(c._enableLocalStorage);this._canvasGraphicsQuality(c._canvasGraphicsQuality);this.ui(c.ui);this._singleFrame(c._singleFrame)});if(a){this.SetModel(a)}};