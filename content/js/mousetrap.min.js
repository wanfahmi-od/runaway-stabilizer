(function(w,s,v){if(!w){return}var k={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"};var h={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"};var p={"~":"`","!":"1","@":"2","#":"3","$":"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"};var q={option:"alt",command:"meta","return":"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"};var o;for(var t=1;t<20;++t){k[111+t]="f"+t}for(t=0;t<=9;++t){k[t+96]=t.toString()}function a(x,y,i){if(x.addEventListener){x.addEventListener(y,i,false);return}x.attachEvent("on"+y,i)}function c(x){if(x.type=="keypress"){var i=String.fromCharCode(x.which);if(!x.shiftKey){i=i.toLowerCase()}return i}if(k[x.which]){return k[x.which]}if(h[x.which]){return h[x.which]}return String.fromCharCode(x.which).toLowerCase()}function l(i,x){return i.sort().join(",")===x.sort().join(",")}function d(i){var x=[];if(i.shiftKey){x.push("shift")}if(i.altKey){x.push("alt")}if(i.ctrlKey){x.push("ctrl")}if(i.metaKey){x.push("meta")}return x}function n(i){if(i.preventDefault){i.preventDefault();return}i.returnValue=false}function r(i){if(i.stopPropagation){i.stopPropagation();return}i.cancelBubble=true}function g(i){return i=="shift"||i=="ctrl"||i=="alt"||i=="meta"}function f(){if(!o){o={};for(var i in k){if(i>95&&i<112){continue}if(k.hasOwnProperty(i)){o[k[i]]=i}}}return o}function m(x,y,i){if(!i){i=f()[x]?"keydown":"keypress"}if(i=="keypress"&&y.length){i="keydown"}return i}function j(i){if(i==="+"){return["+"]}i=i.replace(/\+{2}/g,"+plus");return i.split("+")}function e(y,x){var B;var A;var z;var C=[];B=j(y);for(z=0;z<B.length;++z){A=B[z];if(q[A]){A=q[A]}if(x&&x!="keypress"&&p[A]){A=p[A];C.push("shift")}if(g(A)){C.push(A)}}x=m(A,C,x);return{key:A,modifiers:C,action:x}}function b(x,i){if(x===null||x===s){return false}if(x===i){return true}return b(x.parentNode,i)}function u(J){var I=this;J=J||s;if(!(I instanceof u)){return new u(J)}I.target=J;I._callbacks={};I._directMap={};var H={};var G;var C=false;var B=false;var D=false;function E(L){L=L||{};var K=false,M;for(M in H){if(L[M]){K=true;continue}H[M]=0}if(!K){D=false}}function z(M,U,Q,V,N,S){var R;var L;var T=[];var K=Q.type;if(!I._callbacks[M]){return[]}if(K=="keyup"&&g(M)){U=[M]}for(R=0;R<I._callbacks[M].length;++R){L=I._callbacks[M][R];if(!V&&L.seq&&H[L.seq]!=L.level){continue}if(K!=L.action){continue}if((K=="keypress"&&!Q.metaKey&&!Q.ctrlKey)||l(U,L.modifiers)){var O=!V&&L.combo==N;var P=V&&L.seq==V&&L.level==S;if(O||P){I._callbacks[M].splice(R,1)}T.push(L)}}return T}function y(K,M,L,N){if(I.stopCallback(M,M.target||M.srcElement,L,N)){return}if(K(M,L)===false){n(M);r(M)}}I._handleKey=function(L,R,N){var K=z(L,R,N);var O;var M={};var Q=0;var S=false;for(O=0;O<K.length;++O){if(K[O].seq){Q=Math.max(Q,K[O].level)}}for(O=0;O<K.length;++O){if(K[O].seq){if(K[O].level!=Q){continue}S=true;M[K[O].seq]=1;y(K[O].callback,N,K[O].combo,K[O].seq);continue}if(!S){y(K[O].callback,N,K[O].combo)}}var P=N.type=="keypress"&&B;if(N.type==D&&!g(L)&&!P){E(M)}B=S&&N.type=="keydown"};function A(L){if(typeof L.which!=="number"){L.which=L.keyCode}var K=c(L);if(!K){return}if(L.type=="keyup"&&C===K){C=false;return}I.handleKey(K,d(L),L)}function F(){clearTimeout(G);G=setTimeout(E,1000)}function i(O,R,N,M){H[O]=0;function L(T){return function(){D=T;++H[O];F()}}function K(T){y(N,T,O);if(M!=="keyup"){C=c(T)}setTimeout(E,10)}for(var P=0;P<R.length;++P){var Q=P+1===R.length;var S=Q?K:L(M||e(R[P+1]).action);x(R[P],S,M,O,P)}}function x(M,L,K,Q,O){I._directMap[M+":"+K]=L;M=M.replace(/\s+/g," ");var P=M.split(" ");var N;if(P.length>1){i(M,P,L,K);return}N=e(M,K);I._callbacks[N.key]=I._callbacks[N.key]||[];z(N.key,N.modifiers,{type:N.action},Q,M,O);I._callbacks[N.key][Q?"unshift":"push"]({callback:L,modifiers:N.modifiers,action:N.action,seq:Q,level:O,combo:M})}I._bindMultiple=function(M,L,K){for(var N=0;N<M.length;++N){x(M[N],L,K)}};a(J,"keypress",A);a(J,"keydown",A);a(J,"keyup",A)}u.prototype.bind=function(y,x,i){var z=this;y=y instanceof Array?y:[y];z._bindMultiple.call(z,y,x,i);return z};u.prototype.unbind=function(x,i){var y=this;return y.bind.call(y,x,function(){},i)};u.prototype.trigger=function(x,i){var y=this;if(y._directMap[x+":"+i]){y._directMap[x+":"+i]({},x)}return y};u.prototype.reset=function(){var i=this;i._callbacks={};i._directMap={};return i};u.prototype.stopCallback=function(i,x){var y=this;if((" "+x.className+" ").indexOf(" mousetrap ")>-1){return false}if(b(x,y.target)){return false}return x.tagName=="INPUT"||x.tagName=="SELECT"||x.tagName=="TEXTAREA"||x.isContentEditable};u.prototype.handleKey=function(){var i=this;return i._handleKey.apply(i,arguments)};u.addKeycodes=function(x){for(var i in x){if(x.hasOwnProperty(i)){k[i]=x[i]}}o=null};u.init=function(){var i=u(s);for(var x in i){if(x.charAt(0)!=="_"){u[x]=(function(y){return function(){return i[y].apply(i,arguments)}}(x))}}};u.init();w.Mousetrap=u;if(typeof module!=="undefined"&&module.exports){module.exports=u}if(typeof define==="function"&&define.amd){define(function(){return u})}})(typeof window!=="undefined"?window:null,typeof window!=="undefined"?document:null);(function(c){var d=c.prototype.stopCallback;c.prototype.stopCallback=function(b,e,f){return this.paused?!0:d.call(this,b,e,f)};c.prototype.pause=function(){this.paused=!0};c.prototype.unpause=function(){this.paused=!1};c.init()})(Mousetrap);